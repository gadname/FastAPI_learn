# Claude Code組織運用マニュアル

## 基本的な運用フロー

### 1. 環境起動
```bash
# 開発環境の起動
./setup_dev_layout.sh

# 大規模プロジェクトの場合（16ペイン）
./create_tmux_layout.sh
```

### 2. 役割ベースの作業フロー

#### Phase 1: 企画・要件定義（Boss → PM）
1. **Boss**がプロジェクトの概要を決定
2. **PM役のClaude**に要件定義を依頼
3. 要件定義書を`claude-org/docs/`に保存

#### Phase 2: 設計・実装（PM → Dev）
1. **PM**がタスクを分解
2. **Dev役のClaude**に実装を依頼
3. コードを`claude-org/dev/`で管理

#### Phase 3: テスト・品質保証（Dev → Test）
1. **Dev**が実装完了を報告
2. **Test役のClaude**にテストを依頼
3. テスト結果を`claude-org/test/`に保存

#### Phase 4: 最終確認（Test → Boss）
1. **Test**が品質保証を完了
2. **Boss**が最終チェック
3. 承認後、本番環境へデプロイ

## tmux操作の基本

### セッション管理
```bash
# セッション一覧表示
tmux ls

# セッションにアタッチ
tmux attach-session -t dev

# セッションから離脱
Ctrl-b d
```

### ペイン操作
```bash
# ペイン移動
Ctrl-b + 矢印キー

# ペイン番号表示→直接移動
Ctrl-b q [数字]

# ペイン最大化/復元
Ctrl-b z
```

## 実践的な使用例

### 例1: TODOアプリ開発
```bash
# 1. Boss（あなた）の指示
cd claude-org/boss
echo "FastAPIとNext.jsを使ったTODOアプリを開発したい" > project_brief.txt

# 2. PMに要件定義を依頼
cd ../pm
# Claude Codeに以下を依頼:
# "project_brief.txtを読んで、TODOアプリの要件定義書を作成してください"

# 3. Devに実装を依頼
cd ../dev
# Claude Codeに以下を依頼:
# "要件定義書に基づいて、FastAPIのバックエンドを実装してください"

# 4. Testにテストを依頼
cd ../test
# Claude Codeに以下を依頼:
# "実装されたコードのテストケースを作成し、実行してください"
```

## 効率化のコツ

### 1. コンテキストの引き継ぎ
- 各段階で前の成果物を明示的に参照
- `claude-org/docs/context.md`で全体の状況を管理

### 2. 並行作業の活用
- 複数のtmuxペインで異なる役割を同時実行
- 一つのタスクが完了したら次の役割にすぐ切り替え

### 3. 定期的なレビュー
- 各フェーズの完了時に必ず成果物をレビュー
- 問題があれば即座に前のフェーズに戻る

### 4. ドキュメントの活用
- 全ての決定事項と変更履歴を記録
- 後から見返せるようにファイル名に日付を含める

## トラブルシューティング

### tmuxセッションが応答しない
```bash
# セッションを強制終了
tmux kill-session -t dev

# 再度環境を起動
./setup_dev_layout.sh
```

### Claude Codeが期待通りに動作しない
1. より具体的な指示を与える
2. 前の成果物を明示的に参照させる
3. 役割（Role）を明確に定義する
4. 必要に応じて人間（あなた）が介入する

## 拡張方法

### カスタムレイアウトの作成
既存のスクリプトを参考に、プロジェクトに応じたレイアウトを作成可能：
- 2ペイン構成（シンプル）
- 6ペイン構成（中規模）
- 16ペイン構成（大規模）

### 自動化スクリプトの追加
定型的な作業を自動化するスクリプトを`claude-org/scripts/`に保存